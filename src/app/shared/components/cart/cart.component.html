<ng-container *ngIf="cartState$ | async as cartState">
  <ng-container *ngIf="cartState.isCartOpen">
    <div class="cart-overlay" (click)="toggle()"></div>
    <div class="cart scrollbar" [@slideInLeft]>
      <div class="cart__top">
        <span>Your Cart [{{ cartState.cartProducts.length }}]</span>
        <button type="button" (click)="toggle()"><ng-icon class="close-btn" name="heroXMark"></ng-icon></button>
      </div>
      <div class="cart__content">
        <ng-container *ngIf="cartState.cartProducts.length > 0; else emptyCart">
          <!-- Product -->
          <div class="product" *ngFor="let product of cartState.cartProducts">
            <img [src]="'assets/images/' + product.imgSrc" alt="" />
            <div class="product__details">
              <div class="product__details-name">{{ product.name }}</div>
              <div class="product__details-price">{{ product.price | currency }}</div>
              <cof-quantity [qty]="product.quantity" (onUpdateQty)="updateQty($event, product)"></cof-quantity>
            </div>
          </div>
        </ng-container>
        <ng-template #emptyCart>
          <div class="empty-cart">Your shopping cart is empty</div>
        </ng-template>
      </div>
      <div class="cart__bottom">
        <div class="cart__bottom-total">
          <span>Subtotal</span>
          <span>{{ cartState.cartSubTotal | currency }}</span>
        </div>
        <button type="button" class="cart__bottom-chkbtn" (click)="onCheckout(cartState.cartProducts.length)">
          Checkout
        </button>
      </div>
    </div>
  </ng-container>
</ng-container>
